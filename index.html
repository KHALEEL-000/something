<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ff6b9d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>For My Wahjuuu ğŸ’</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            background: #0a0a0a;
            min-height: 100vh;
            perspective: 1000px;
        }

        /* Animated gradient background */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff6b9d, #c06c84, #6c5ce7, #a29bfe);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -2;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Depth of field blur layers */
        .blur-layer {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .blur-layer-1 {
            z-index: -1;
            backdrop-filter: blur(0px);
        }

        /* Floating hearts with depth */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart-float {
            position: absolute;
            font-size: 40px;
            opacity: 0.3;
            animation: floatHeart linear infinite;
            filter: blur(2px);
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-20vh) translateX(var(--tx)) rotate(360deg) scale(1);
                opacity: 0;
            }
        }

        /* Main container with 3D transform */
        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transform-style: preserve-3d;
        }

        /* Step cards with glassmorphism */
        .step {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 60px 40px;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px) saturate(180%);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3),
                        0 0 100px rgba(255, 107, 157, 0.2);
            transform: translateZ(50px);
            animation: slideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .step.active {
            display: flex;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateZ(0px) translateY(50px) rotateX(-10deg);
            }
            to {
                opacity: 1;
                transform: translateZ(50px) translateY(0) rotateX(0deg);
            }
        }

        /* 3D emoji with bounce */
        .emoji {
            font-size: 6em;
            margin-bottom: 25px;
            animation: emoji3D 3s ease-in-out infinite;
            text-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform-style: preserve-3d;
        }

        @keyframes emoji3D {
            0%, 100% {
                transform: translateY(0) rotateY(0deg) scale(1);
            }
            25% {
                transform: translateY(-15px) rotateY(10deg) scale(1.05);
            }
            50% {
                transform: translateY(0) rotateY(0deg) scale(1);
            }
            75% {
                transform: translateY(-10px) rotateY(-10deg) scale(1.05);
            }
        }

        h1 {
            color: white;
            font-size: 3em;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            letter-spacing: 1px;
        }

        p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.3em;
            margin-bottom: 25px;
            line-height: 1.8;
            font-weight: 300;
        }

        .nickname {
            color: #ffd700;
            font-weight: 700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            display: inline-block;
            animation: glowPulse 2s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% {
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            }
            50% {
                text-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.6);
            }
        }

        /* Pookie cute buttons */
        button {
            background: linear-gradient(135deg, #ff6b9d 0%, #f06292 100%);
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.2em;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.4),
                        inset 0 -3px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
            letter-spacing: 0.5px;
            margin: 8px;
        }

        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        button:hover::before {
            width: 300px;
            height: 300px;
        }

        button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.6),
                        inset 0 -3px 10px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(-2px) scale(1.02);
        }

        /* Memory box with glass effect */
        .memory-box {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.05);
        }

        /* Choice buttons container */
        .choice-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        #noBtn {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            box-shadow: 0 10px 30px rgba(127, 140, 141, 0.4);
        }

        #noBtn:hover {
            box-shadow: 0 15px 40px rgba(127, 140, 141, 0.6);
        }

        #yesBtn {
            animation: heartbeatBtn 1.5s ease-in-out infinite;
        }

        @keyframes heartbeatBtn {
            0%, 100% {
                transform: scale(1);
            }
            10%, 30% {
                transform: scale(1.1);
            }
            20%, 40% {
                transform: scale(1);
            }
        }

        /* Final message card */
        .final-message {
            background: rgba(255, 255, 255, 0.95);
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
            max-width: 650px;
            animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes popIn {
            0% {
                transform: scale(0.5) rotateY(90deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotateY(0deg);
                opacity: 1;
            }
        }

        .final-message h1 {
            color: #ff6b9d;
            animation: colorShift 3s ease-in-out infinite;
        }

        @keyframes colorShift {
            0%, 100% { color: #ff6b9d; }
            33% { color: #f06292; }
            66% { color: #ec407a; }
        }

        .final-message p {
            color: #6c5ce7;
        }

        /* Progress bar with glow */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, #ff6b9d 0%, #f06292 50%, #ec407a 100%);
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 10000;
            box-shadow: 0 0 20px rgba(255, 107, 157, 0.6);
        }

        /* Step counter with glass */
        .step-counter {
            position: fixed;
            top: 25px;
            right: 25px;
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 25px;
            border-radius: 50px;
            color: white;
            font-size: 1em;
            font-weight: 600;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        /* Confetti particles */
        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: confettiFall 3s ease-out forwards;
            z-index: 9999;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-20px) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) translateX(var(--tx)) rotate(720deg);
                opacity: 0;
            }
        }

        /* Sparkle effect */
        .sparkle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkleAnim 1s ease-out forwards;
            z-index: 9998;
        }

        @keyframes sparkleAnim {
            0% {
                transform: scale(0) translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: scale(1) translate(var(--tx), var(--ty));
                opacity: 0;
            }
        }

        /* Rose animation */
        .rose {
            font-size: 4em;
            display: inline-block;
            animation: roseGrow 2s ease-in-out infinite;
            margin: 0 10px;
        }

        @keyframes roseGrow {
            0%, 100% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.2) rotate(5deg);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2.2em; }
            p { font-size: 1.1em; line-height: 1.6; }
            button { 
                font-size: 1em; 
                padding: 16px 35px;
                min-height: 48px; /* Better touch target */
            }
            .step { 
                padding: 35px 20px; 
                max-width: 90%;
                margin: 0 15px;
            }
            .final-message { 
                padding: 35px 20px;
                max-width: 90%;
            }
            .emoji { font-size: 4em; }
            .step-counter {
                top: 15px;
                right: 15px;
                font-size: 0.85em;
                padding: 8px 15px;
            }
            #musicToggle {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
                font-size: 1.5em;
            }
            .memory-box {
                padding: 18px;
                font-size: 0.95em;
            }
            /* Reduce animations on mobile for performance */
            .heart-float {
                animation-duration: 12s !important;
            }
            .emoji {
                animation: emoji3DMobile 3s ease-in-out infinite;
            }
            @keyframes emoji3DMobile {
                0%, 100% {
                    transform: translateY(0) scale(1);
                }
                50% {
                    transform: translateY(-10px) scale(1.05);
                }
            }
            /* Prevent horizontal scroll */
            body {
                overflow-x: hidden;
                -webkit-overflow-scrolling: touch;
            }
            .container {
                overflow-x: hidden;
            }
        }

        /* Extra small devices */
        @media (max-width: 480px) {
            h1 { font-size: 1.8em; }
            p { font-size: 1em; }
            button { 
                font-size: 0.9em;
                padding: 14px 28px;
            }
            .step {
                padding: 25px 15px;
            }
            .emoji { font-size: 3.5em; }
        }

        /* Landscape mobile optimization */
        @media (max-height: 600px) and (orientation: landscape) {
            .step {
                padding: 20px 30px;
                overflow-y: auto;
                max-height: 90vh;
            }
            .emoji { font-size: 3em; }
            h1 { font-size: 1.8em; }
            p { font-size: 0.95em; }
        }

        /* Cursor trail effect */
        .cursor-trail {
            position: fixed;
            width: 6px;
            height: 6px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9997;
            animation: cursorFade 0.8s ease-out forwards;
        }

        @keyframes cursorFade {
            to {
                transform: scale(3);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>
    <div class="blur-layer blur-layer-1"></div>
    <div class="floating-hearts" id="floatingHearts"></div>
    <div class="progress-bar" id="progressBar"></div>
    <div class="step-counter" id="stepCounter">Step 1 of 15</div>

    <!-- Background Music -->
    <audio id="bgMusic" loop preload="auto">
    <source src="tahanan.mp3" type="audio/mpeg">
    </audio>

    <!-- Music Control Button -->
    <button id="musicToggle" onclick="toggleMusic()" style="position: fixed; bottom: 25px; right: 25px; z-index: 10001; width: 60px; height: 60px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.8em; box-shadow: 0 10px 30px rgba(0,0,0,0.3); padding: 0; transition: all 0.3s ease;">
        ğŸµ
    </button>

    <div class="container" id="mainContainer">
        <!-- Step 1 -->
        <div class="step active" id="step1">
            <div class="emoji">ğŸ‘‹</div>
            <h1>Hey Wahjuuu!</h1>
            <p>It's me, your <span class="nickname">Khal</span>... ğŸ’­<br>I have something really special to tell you today ğŸ’–</p>
            <button onclick="nextStep(2)">What is it? âœ¨</button>
        </div>

        <!-- Step 2 -->
        <div class="step" id="step2">
            <div class="emoji">ğŸ‘«</div>
            <h1>Remember When...</h1>
            <p>We started as just friends? Two people in college who didn't know they'd become each other's everything... ğŸŒŸ</p>
            <div class="memory-box">
                <p style="font-size: 1.1em;">From classmates to best friends to... something so much more beautiful ğŸ’•</p>
            </div>
            <button onclick="nextStep(3)">Keep Going ğŸ’«</button>
        </div>

        <!-- Step 3 -->
        <div class="step" id="step3">
            <div class="emoji">ğŸ“š</div>
            <h1>Our Little World</h1>
            <p>Those study sessions where we'd pretend to focus but end up talking for hours... ğŸ“–<br>That special spot - <span class="nickname">THE SLOPE</span> - where we always sit and eat together... ğŸ½ï¸<br>Every moment with you feels like home ğŸ’</p>
            <button onclick="nextStep(4)">This is so us! ğŸ¥º</button>
        </div>

        <!-- Step 4 -->
        <div class="step" id="step4">
            <div class="emoji">ğŸŒ™</div>
            <h1>Those Late Night Calls...</h1>
            <p>When everyone else is asleep, but we're still talking, laughing, sharing our dreams... ğŸ’­<br>Those are my favorite moments, <span class="nickname">Rebu</span> ğŸŒŸ</p>
            <div class="memory-box">
                <p style="font-size: 1.1em;">"Good night" becomes "just 5 more minutes" becomes 2 AM ğŸ˜‚ğŸ’•</p>
            </div>
            <button onclick="nextStep(5)">So true!! ğŸ˜Š</button>
        </div>

        <!-- Step 5 -->
        <div class="step" id="step5">
            <div class="emoji">ğŸ“±</div>
            <h1>Our Daily Rituals</h1>
            <p>Sharing reels that only we find funny... ğŸ˜‚<br>Our inside jokes that no one else gets... ğŸ¤«<br>Video calls when we miss each other... ğŸ“<br>The way we just... fit perfectly together ğŸ’•</p>
            <button onclick="nextStep(6)">You know me so well! ğŸ’–</button>
        </div>

        <!-- Step 6 -->
        <div class="step" id="step6">
            <div class="emoji">ğŸ˜Š</div>
            <h1>You Know What?</h1>
            <p>The way you smile lights up my entire world... âœ¨<br>Your laugh is my favorite sound... ğŸµ<br>And being with you? That's when everything feels just right ğŸ’«</p>
            <div class="memory-box">
                <p style="font-size: 1.1em;">You make every ordinary day feel extraordinary, <span class="nickname">Wahjuuu</span> ğŸ’•</p>
            </div>
            <button onclick="nextStep(7)">Awww Khal! ğŸ¥º</button>
        </div>

        <!-- Step 7 -->
        <div class="step" id="step7">
            <div class="emoji">ğŸ§©</div>
            <h1>We Just... Fit</h1>
            <p>Like two pieces of a puzzle... ğŸ§©<br>Like songs in our favorite playlist... ğŸ§<br>Like they say - we're not perfect, but we're perfect for each other ğŸ’</p>
            <button onclick="nextStep(8)">So perfectly! ğŸ’•</button>
        </div>

        <!-- Step 8 -->
        <div class="step" id="step8">
            <div class="emoji">ğŸ’‘</div>
            <h1>1134 Days...</h1>
            <p>more than thousand days of being together officially... ğŸ’–<br>But honestly? It feels like I've known you forever and also like every day is a new adventure ğŸŒŸ</p>
            <div class="memory-box">
                <p style="font-size: 1.1em;">Best decision I ever made was taking that chance with you ğŸ’•</p>
            </div>
            <button onclick="nextStep(9)">Me too! ğŸ˜</button>
        </div>

        <!-- Step 9 -->
        <div class="step" id="step9">
            <div class="emoji">ğŸ’–</div>
            <h1>So Wahjuuu...</h1>
            <p>On this Valentine's Day, I want to ask you something really special... ğŸ’</p>
            <p style="font-size: 1.5em; margin-top: 20px; font-weight: 600;"><strong>Will you be my Valentine?</strong> ğŸŒ¹</p>
            <p>Will you let me keep making you smile every single day? ğŸ˜ŠğŸ’•</p>
            <div class="choice-buttons">
                <button id="yesBtn" onclick="sayYes()">YES KHAL! ğŸ’</button>
                <button id="noBtn" onmouseover="runAway(this)">No ğŸ˜¢</button>
            </div>
        </div>

        <!-- Step 10 -->
        <div class="step" id="step10">
            <div class="final-message">
                <div class="emoji" style="font-size: 5em; margin: 0;">ğŸ‰</div>
                <h1>YESSS REBU!! ğŸ’•</h1>
                <p>You just made me the happiest person alive! ğŸŒ</p>
                <p style="margin-top: 20px;">Now let's make this Valentine's Day PERFECT! ğŸ’–</p>
                <div>
                    <span class="rose">ğŸŒ¹</span>
                    <span class="rose">ğŸ’</span>
                    <span class="rose">ğŸŒ¹</span>
                </div>
                <button onclick="nextStep(11)" style="margin-top: 30px;">Let's plan it! ğŸ’«</button>
            </div>
        </div>

        <!-- Step 11 -->
        <div class="step" id="step11">
            <div class="emoji">ğŸ“…</div>
            <h1>February 14th! ğŸ’•</h1>
            <p>I know we both have exams in the morning ğŸ“šğŸ˜…<br>But after that... I want to spend the BEST day with you! ğŸ’–</p>
            <div class="memory-box">
                <p style="font-size: 1.1em;">First we ace those exams, then we celebrate US! ğŸ‰</p>
            </div>
            <button onclick="nextStep(12)">I'm so excited! ğŸ¥°</button>
        </div>

        <!-- Step 12 -->
        <div class="step" id="step12">
            <div class="emoji">ğŸ½ï¸</div>
            <h1>ASF BBQ Grills! ğŸ”¥</h1>
            <p>I'm taking you to <strong>ASF BBQ Grills at Lulu Mall</strong> for lunch! ğŸ’•</p>
            <div class="memory-box">
                <p style="font-size: 1.2em;"><strong>ğŸ“ The Plan:</strong></p>
                <p>â° Time: lunch time</p>
                <p>ğŸ´ All you can eat together!</p>
                <p>ğŸ’‘ Just us, celebrating our love</p>
                <p>ğŸ“¸ Lots of pictures to remember this day!</p>
            </div>
            <button onclick="nextStep(13)">OMG yes!! ğŸ˜</button>
        </div>

        <!-- Step 13 -->
        <div class="step" id="step13">
            <div class="emoji">ğŸ’­</div>
            <h1>Your Ideas? âœ¨</h1>
            <p>Is there anything special YOU want to do on our Valentine's Day, <span class="nickname">Rebu</span>? ğŸ’•</p>
            <div class="memory-box">
                <p style="font-size: 1.1em;">This day is about US - so tell me what would make you the happiest! ğŸ¥°</p>
            </div>
            <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 25px;">
                <button onclick="selectSuggestion('Just spending time with you is perfect!', 'ğŸ’•')">Just being with you! ğŸ’•</button>
                <button onclick="selectSuggestion('Maybe walk around the mall after?', 'ğŸ›ï¸')">Walk around mall? ğŸ›ï¸</button>
                <button onclick="selectSuggestion('Get dessert somewhere!', 'ğŸ°')">Get dessert! ğŸ°</button>
                <button onclick="selectSuggestion('Watch a movie together!', 'ğŸ¬')">Watch a movie! ğŸ¬</button>
                <button onclick="selectSuggestion('Surprise me, Khal!', 'ğŸ')">Surprise me! ğŸ</button>
            </div>
        </div>

        <!-- Step 14 -->
        <div class="step" id="step14">
            <div class="emoji">ğŸ‘—</div>
            <h1>Let's Look Cute! âœ¨</h1>
            <p>What vibe should we go for, <span class="nickname">Wahjuuu</span>? ğŸ’•</p>
            <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 25px;">
                <button onclick="selectDressCode('Fancy & Dressed Up', 'âœ¨')">Fancy & Dressed Up âœ¨</button>
                <button onclick="selectDressCode('Smart Casual & Cute', 'ğŸ’•')">Smart Casual & Cute ğŸ’•</button>
                <button onclick="selectDressCode('Comfy but Still Pretty', 'ğŸ˜Š')">Comfy but Still Pretty ğŸ˜Š</button>
            </div>
        </div>

        <!-- Step 15 -->
        <div class="step" id="step15">
            <div class="final-message" style="background: linear-gradient(135deg, #fff5f7 0%, #ffe5ec 100%);">
                <div class="emoji" style="font-size: 4.5em; margin: 0;">ğŸ’</div>
                <h1>Our Valentine's Day! ğŸŒ¹</h1>
                <div id="planSummary" style="margin: 25px 0;"></div>
                <p style="font-size: 1.3em; color: #ff6b9d; margin-top: 20px; font-weight: 600;">I can't WAIT for February 14th! ğŸ’–</p>
                <p style="font-size: 1.1em; color: #6c5ce7; margin-top: 12px;">After 1.5 years together, every day with you is still magical âœ¨</p>
                <div class="memory-box" style="margin-top: 20px; background: rgba(255, 255, 255, 0.5);">
                    <p style="font-size: 1em; color: #6c5ce7;">From late night calls to study dates,<br>from sharing reels to sharing dreams,<br>from friends to forever... ğŸ’•</p>
                    <p style="font-size: 1.2em; color: #ff6b9d; margin-top: 12px; font-weight: 700;"><strong>Happy Valentine's Day, my Wahjuuu! ğŸŒ¹</strong></p>
                    <p style="font-size: 1.1em; color: #6c5ce7; margin-top: 8px;">- Your Khal ğŸ’–</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 15;
        let datePlan = { suggestion: '', suggestionEmoji: '', dressCode: '', dressCodeEmoji: '' };

        // Floating hearts in background
        const isMobile = window.innerWidth <= 768;
        
        function createFloatingHeart() {
            const container = document.getElementById('floatingHearts');
            const heart = document.createElement('div');
            heart.classList.add('heart-float');
            heart.innerHTML = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸ’'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.setProperty('--tx', (Math.random() - 0.5) * 200 + 'px');
            heart.style.animationDuration = (Math.random() * 5 + 8) + 's';
            heart.style.fontSize = (Math.random() * 30 + 25) + 'px';
            container.appendChild(heart);
            setTimeout(() => heart.remove(), 13000);
        }
        
        // Adjust frequency based on device
        setInterval(createFloatingHeart, isMobile ? 1500 : 800);

        // Cursor trail
        document.addEventListener('mousemove', (e) => {
            if (Math.random() > 0.8) {
                const trail = document.createElement('div');
                trail.classList.add('cursor-trail');
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                document.body.appendChild(trail);
                setTimeout(() => trail.remove(), 800);
            }
        });

        function nextStep(step) {
            createSparkles();
            document.getElementById(`step${currentStep}`).classList.remove('active');
            setTimeout(() => {
                document.getElementById(`step${step}`).classList.add('active');
                currentStep = step;
                updateProgress();
            }, 100);
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('stepCounter').textContent = `Step ${currentStep} of ${totalSteps}`;
        }

        function runAway(button) {
            const maxX = window.innerWidth - button.offsetWidth - 50;
            const maxY = window.innerHeight - button.offsetHeight - 50;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            button.style.position = 'fixed';
            button.style.left = x + 'px';
            button.style.top = y + 'px';
            button.style.transition = 'all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)';
            
            const yesBtn = document.getElementById('yesBtn');
            const currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
            yesBtn.style.fontSize = (currentSize + 2) + 'px';
        }

        function sayYes() {
            for(let i = 0; i < 200; i++) {
                setTimeout(() => createConfetti(), i * 15);
            }
            setTimeout(() => nextStep(10), 1000);
        }

        function createConfetti() {
            const colors = ['#ff6b9d', '#f06292', '#ec407a', '#6c5ce7', '#a29bfe', '#ffd700'];
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.top = '-20px';
            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.setProperty('--tx', (Math.random() - 0.5) * 400 + 'px');
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
        }

        function createSparkles() {
            for(let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.classList.add('sparkle');
                    sparkle.style.left = (Math.random() * 100) + '%';
                    sparkle.style.top = (Math.random() * 100) + '%';
                    sparkle.style.setProperty('--tx', (Math.random() - 0.5) * 100 + 'px');
                    sparkle.style.setProperty('--ty', (Math.random() - 0.5) * 100 + 'px');
                    document.body.appendChild(sparkle);
                    setTimeout(() => sparkle.remove(), 1000);
                }, i * 30);
            }
        }

        // Optimize confetti count for mobile
        function createConfetti() {
            const colors = ['#ff6b9d', '#f06292', '#ec407a', '#6c5ce7', '#a29bfe', '#ffd700'];
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.top = '-20px';
            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.setProperty('--tx', (Math.random() - 0.5) * 400 + 'px');
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
        }

        // Reduce confetti on mobile
        function sayYes() {
            const confettiCount = isMobile ? 100 : 200;
            for(let i = 0; i < confettiCount; i++) {
                setTimeout(() => createConfetti(), i * 15);
            }
            setTimeout(() => nextStep(10), 1000);
        }

        function selectSuggestion(suggestion, emoji) {
            datePlan.suggestion = suggestion;
            datePlan.suggestionEmoji = emoji;
            const confettiCount = isMobile ? 30 : 50;
            for(let i = 0; i < confettiCount; i++) setTimeout(() => createConfetti(), i * 15);
            setTimeout(() => nextStep(14), 500);
        }

        function selectDressCode(dressCode, emoji) {
            datePlan.dressCode = dressCode;
            datePlan.dressCodeEmoji = emoji;
            showFinalPlan();
            const confettiCount = isMobile ? 80 : 150;
            for(let i = 0; i < confettiCount; i++) setTimeout(() => createConfetti(), i * 10);
            setTimeout(() => nextStep(15), 500);
        }

        function showFinalPlan() {
            const summary = document.getElementById('planSummary');
            summary.innerHTML = `
                <div style="background: white; padding: 25px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
                    <h2 style="color: #ff6b9d; margin-bottom: 20px; font-size: 1.8em;">ğŸ’ Our Perfect Valentine's Day ğŸ’</h2>
                    
                    <div style="margin: 15px 0; padding: 15px; background: #fff5f7; border-radius: 12px; border-left: 4px solid #ff6b9d;">
                        <p style="font-size: 1.1em; color: #6c5ce7; font-weight: 600;">ğŸ“… Date:</p>
                        <p style="color: #ff6b9d; font-size: 1em; margin-top: 5px;">February 14th, 2026 ğŸ’•</p>
                    </div>
                    
                    <div style="margin: 15px 0; padding: 15px; background: #fff5f7; border-radius: 12px; border-left: 4px solid #ff6b9d;">
                        <p style="font-size: 1.1em; color: #6c5ce7; font-weight: 600;">ğŸ“š Morning:</p>
                        <p style="color: #ff6b9d; font-size: 1em; margin-top: 5px;">Ace our exams! ğŸ’ª</p>
                    </div>
                    
                    <div style="margin: 15px 0; padding: 15px; background: #fff5f7; border-radius: 12px; border-left: 4px solid #ff6b9d;">
                        <p style="font-size: 1.1em; color: #6c5ce7; font-weight: 600;">ğŸ½ï¸ Lunch:</p>
                        <p style="color: #ff6b9d; font-size: 1em; margin-top: 5px;">ASF BBQ Grills at Lulu Mall ğŸ”¥</p>
                        <p style="color: #6c5ce7; font-size: 0.9em;">â° 1:00 PM - 2:00 PM</p>
                    </div>
                    
                    <div style="margin: 15px 0; padding: 15px; background: #fff5f7; border-radius: 12px; border-left: 4px solid #ff6b9d;">
                        <p style="font-size: 1.1em; color: #6c5ce7; font-weight: 600;">${datePlan.suggestionEmoji} Wahjuuu's Idea:</p>
                        <p style="color: #ff6b9d; font-size: 1em; margin-top: 5px;">${datePlan.suggestion}</p>
                    </div>
                    
                    <div style="margin: 15px 0; padding: 15px; background: #fff5f7; border-radius: 12px; border-left: 4px solid #ff6b9d;">
                        <p style="font-size: 1.1em; color: #6c5ce7; font-weight: 600;">${datePlan.dressCodeEmoji} Dress Code:</p>
                        <p style="color: #ff6b9d; font-size: 1em; margin-top: 5px;">${datePlan.dressCode}</p>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 20px; background: linear-gradient(135deg, #ff6b9d 0%, #f06292 100%); border-radius: 15px; text-align: center;">
                        <p style="font-size: 1.3em; color: white; font-weight: 700;">âœ¨ It's going to be MAGICAL! âœ¨</p>
                    </div>
                </div>
            `;
        }

        updateProgress();

        // Music controls
        let musicPlaying = false;
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');

        function toggleMusic() {
            if (musicPlaying) {
                bgMusic.pause();
                musicToggle.innerHTML = 'ğŸµ';
                musicToggle.style.background = 'rgba(255, 255, 255, 0.2)';
                musicPlaying = false;
            } else {
                bgMusic.play().catch(e => console.log('Audio play failed:', e));
                musicToggle.innerHTML = 'ğŸ”Š';
                musicToggle.style.background = 'rgba(255, 107, 157, 0.3)';
                musicPlaying = true;
            }
        }

        // Auto-play music on first user interaction
        let hasInteracted = false;
        document.addEventListener('click', () => {
            if (!hasInteracted) {
                bgMusic.play().catch(e => console.log('Audio play failed:', e));
                musicToggle.innerHTML = 'ğŸ”Š';
                musicToggle.style.background = 'rgba(255, 107, 157, 0.3)';
                musicPlaying = true;
                hasInteracted = true;
            }
        });

        // Prevent zoom on double tap (mobile)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // Add touch feedback for buttons
        document.addEventListener('touchstart', (e) => {
            if (e.target.tagName === 'BUTTON') {
                e.target.style.transform = 'scale(0.95)';
            }
        });

        document.addEventListener('touchend', (e) => {
            if (e.target.tagName === 'BUTTON') {
                e.target.style.transform = '';
            }
        });
    </script>
</body>
</html>
